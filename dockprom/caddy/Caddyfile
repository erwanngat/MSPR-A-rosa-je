:80 {
  route /app* {
    uri strip_prefix /app
    reverse_proxy webapp-container:3000
  }

  route /grafana* {
    uri strip_prefix /grafana
    reverse_proxy grafana:3000
  }

  route /cadvisor* {
    basicauth {
      {$ADMIN_USER} {$ADMIN_PASSWORD_HASH}
    }
    uri strip_prefix /cadvisor
    reverse_proxy cadvisor:8080
  }

  route /prometheus* {
    basicauth {
      {$ADMIN_USER} {$ADMIN_PASSWORD_HASH}
    }
    uri strip_prefix /prometheus
    reverse_proxy prometheus:9090
  }

  route /alertmanager* {
    basicauth {
      {$ADMIN_USER} {$ADMIN_PASSWORD_HASH}
    }
    uri strip_prefix /alertmanager
    reverse_proxy alertmanager:9093
  }

  route /pushgateway* {
    basicauth {
      {$ADMIN_USER} {$ADMIN_PASSWORD_HASH}
    }
    uri strip_prefix /pushgateway
    reverse_proxy pushgateway:9091
  }
}
